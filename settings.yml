elasticsearch: &elasticsearch elasticsearch:9200

elasticsearch:
    ES_CARD_TYPE: item
    ES_HOST: *elasticsearch
    ES_INDEX: docido

    ES_STORE_HOST: *elasticsearch
    ES_STORE_INDEX: store_docido
    ES_STORE_TYPE: cached_item

    MAPPING:
        # describe Elasticsearch "docido" index mapping
        docido:
            id:
                type: string
                index: not_analyzed
            title:
                type: string
            description:
                type: string
              "date" : {
                "type" : "date",
                "format" : "E MMM d H:m:s Z y||d MMM 'at' H:m||y-M-d'T'H:m:s'Z'||y-M-d'T'H:m:s||y-M-d'T'H:m:s.S||y-M-d'T'H:m:s.SS||yyyy-MM-dd'T'HH:mm:ssZ",
                "locale" : "en_US.UTF-8"
              },
            kind:
                type: string
                index: not_analyzed
            author.name:
                properties:
                    author:
                        type: nested
                        properties:
                            name:
                                type: string
                                index: not_analyzed
            attachments.title:
                properties:
                    attachments:
                        type: nested
                        properties:
                            title:
                                type: string
            attachments.origin_id:
                properties:
                    attachments:
                        type: nested
                        properties:
                            origin_id:
                                type: string
                                index: not_analyzed
            attachments.type:
                properties:
                    attachments:
                        type: nested
                        properties:
                            type:
                                type: string
            attachments.type:
                properties:
                    attachments:
                        type: nested
                        properties:
                            description:
                                type: string

pull_crawlers:
    indexing:
      pipeline:
        - CheckProcessor
        - ElasticsearchMapping
        - Elasticsearch
        - LocalKV

      check_processor:
        schemas:
          card:
              options:
                  extra: true
                  required: true
              content:
                  id: str
                  title: str
                  description: str
                  date:
                      All:
                        - int
                        - Range:
                            min: 0
                  kind: str
                  author:
                      nested:
                          name: str
                  attachments:
                    -
                        title: str
                        origin_id: str
                        type: str
                        description: str
          query:
            content:
              query: object

    crawlers:
        trello:
            indexing:
                check_processor:
                    schemas:
                        card:
                            gen: long
            mapping:
                gen:
                    type: long
